(self.webpackChunk_making_sense_antlr_editor=self.webpackChunk_making_sense_antlr_editor||[]).push([[179],{"./node_modules/monaco-editor/esm/vs/base/common/worker lazy recursive ^.*$":(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./simpleWorker":"./node_modules/monaco-editor/esm/vs/base/common/worker/simpleWorker.js","./simpleWorker.js":"./node_modules/monaco-editor/esm/vs/base/common/worker/simpleWorker.js"};function webpackAsyncContext(req){return Promise.resolve().then((()=>{if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return __webpack_require__(map[req])}))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id="./node_modules/monaco-editor/esm/vs/base/common/worker lazy recursive ^.*$",module.exports=webpackAsyncContext},"./node_modules/monaco-editor/esm/vs/editor/common/services lazy recursive ^.*$":(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./editorBaseApi":["./node_modules/monaco-editor/esm/vs/editor/common/services/editorBaseApi.js"],"./editorBaseApi.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/editorBaseApi.js"],"./editorSimpleWorker":["./node_modules/monaco-editor/esm/vs/editor/common/services/editorSimpleWorker.js"],"./editorSimpleWorker.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/editorSimpleWorker.js"],"./editorWorker":["./node_modules/monaco-editor/esm/vs/editor/common/services/editorWorker.js"],"./editorWorker.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/editorWorker.js"],"./editorWorkerHost":["./node_modules/monaco-editor/esm/vs/editor/common/services/editorWorkerHost.js"],"./editorWorkerHost.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/editorWorkerHost.js"],"./findSectionHeaders":["./node_modules/monaco-editor/esm/vs/editor/common/services/findSectionHeaders.js"],"./findSectionHeaders.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/findSectionHeaders.js"],"./getIconClasses":["./node_modules/monaco-editor/esm/vs/editor/common/services/getIconClasses.js"],"./getIconClasses.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/getIconClasses.js"],"./languageFeatureDebounce":["./node_modules/monaco-editor/esm/vs/editor/common/services/languageFeatureDebounce.js"],"./languageFeatureDebounce.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/languageFeatureDebounce.js"],"./languageFeatures":["./node_modules/monaco-editor/esm/vs/editor/common/services/languageFeatures.js"],"./languageFeatures.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/languageFeatures.js"],"./languageFeaturesService":["./node_modules/monaco-editor/esm/vs/editor/common/services/languageFeaturesService.js"],"./languageFeaturesService.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/languageFeaturesService.js"],"./languageService":["./node_modules/monaco-editor/esm/vs/editor/common/services/languageService.js"],"./languageService.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/languageService.js"],"./languagesAssociations":["./node_modules/monaco-editor/esm/vs/editor/common/services/languagesAssociations.js"],"./languagesAssociations.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/languagesAssociations.js"],"./languagesRegistry":["./node_modules/monaco-editor/esm/vs/editor/common/services/languagesRegistry.js"],"./languagesRegistry.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/languagesRegistry.js"],"./markerDecorations":["./node_modules/monaco-editor/esm/vs/editor/common/services/markerDecorations.js"],"./markerDecorations.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/markerDecorations.js"],"./markerDecorationsService":["./node_modules/monaco-editor/esm/vs/editor/common/services/markerDecorationsService.js"],"./markerDecorationsService.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/markerDecorationsService.js"],"./model":["./node_modules/monaco-editor/esm/vs/editor/common/services/model.js"],"./model.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/model.js"],"./modelService":["./node_modules/monaco-editor/esm/vs/editor/common/services/modelService.js"],"./modelService.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/modelService.js"],"./resolverService":["./node_modules/monaco-editor/esm/vs/editor/common/services/resolverService.js"],"./resolverService.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/resolverService.js"],"./semanticTokensDto":["./node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensDto.js"],"./semanticTokensDto.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensDto.js"],"./semanticTokensProviderStyling":["./node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensProviderStyling.js"],"./semanticTokensProviderStyling.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensProviderStyling.js"],"./semanticTokensStyling":["./node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensStyling.js"],"./semanticTokensStyling.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensStyling.js"],"./semanticTokensStylingService":["./node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensStylingService.js"],"./semanticTokensStylingService.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/semanticTokensStylingService.js"],"./textModelSync/textModelSync.impl":["./node_modules/monaco-editor/esm/vs/editor/common/services/textModelSync/textModelSync.impl.js"],"./textModelSync/textModelSync.impl.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/textModelSync/textModelSync.impl.js"],"./textModelSync/textModelSync.protocol":["./node_modules/monaco-editor/esm/vs/editor/common/services/textModelSync/textModelSync.protocol.js",3145],"./textModelSync/textModelSync.protocol.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/textModelSync/textModelSync.protocol.js",3145],"./textResourceConfiguration":["./node_modules/monaco-editor/esm/vs/editor/common/services/textResourceConfiguration.js"],"./textResourceConfiguration.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/textResourceConfiguration.js"],"./treeSitterParserService":["./node_modules/monaco-editor/esm/vs/editor/common/services/treeSitterParserService.js"],"./treeSitterParserService.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/treeSitterParserService.js"],"./treeViewsDnd":["./node_modules/monaco-editor/esm/vs/editor/common/services/treeViewsDnd.js"],"./treeViewsDnd.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/treeViewsDnd.js"],"./treeViewsDndService":["./node_modules/monaco-editor/esm/vs/editor/common/services/treeViewsDndService.js"],"./treeViewsDndService.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/treeViewsDndService.js"],"./unicodeTextModelHighlighter":["./node_modules/monaco-editor/esm/vs/editor/common/services/unicodeTextModelHighlighter.js"],"./unicodeTextModelHighlighter.js":["./node_modules/monaco-editor/esm/vs/editor/common/services/unicodeTextModelHighlighter.js"]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}));var ids=map[req],id=ids[0];return Promise.all(ids.slice(1).map(__webpack_require__.e)).then((()=>__webpack_require__(id)))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id="./node_modules/monaco-editor/esm/vs/editor/common/services lazy recursive ^.*$",module.exports=webpackAsyncContext},"./src/stories/EnhancedEditor.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,ErrorBoundaryTest:()=>ErrorBoundaryTest,LayoutChangeTest:()=>LayoutChangeTest,ResizingTest:()=>ResizingTest,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_Editor__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/Editor.tsx"),_making_sense_vtl_2_1_antlr_tools_ts__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@making-sense/vtl-2-1-antlr-tools-ts/lib/index.js"),_making_sense_vtl_2_1_monaco_tools_ts__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@making-sense/vtl-2-1-monaco-tools-ts/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js"),customTools=(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)((0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)({},_making_sense_vtl_2_1_antlr_tools_ts__WEBPACK_IMPORTED_MODULE_2__),{},{getSuggestionsFromRange:_making_sense_vtl_2_1_monaco_tools_ts__WEBPACK_IMPORTED_MODULE_3__.getSuggestionsFromRange,monarchDefinition:_making_sense_vtl_2_1_monaco_tools_ts__WEBPACK_IMPORTED_MODULE_3__.monarchDefinition}),EditorForStories=function EditorForStories(props){var _props$initialRule=props.initialRule,initialRule=void 0===_props$initialRule?"start":_props$initialRule;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Editor__WEBPACK_IMPORTED_MODULE_1__.Z,(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)((0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)({},props),{},{tools:(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)((0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)({},customTools),{},{initialRule})}))};const __WEBPACK_DEFAULT_EXPORT__={title:"EnhancedEditor",component:EditorForStories,tags:["autodocs"]};var Default={args:{initialRule:"start"},argTypes:{initialRule:{control:"select",options:["start","expr"]}}},ResizingTest={render:function render(){var _useState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("300px"),_useState2=(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_useState,2),height=_useState2[0],setHeight=_useState2[1],_useState3=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("100%"),_useState4=(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_useState3,2),width=_useState4[0],setWidth=_useState4[1],_useState5=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('ds_out := ds_in [calc r := random(150, 20)]\n                [calc c := case when r < 0.2 then "Low" when r > 0.8 then "High" else "Medium"];\na := datediff(cast("2022Q1", time_period), cast("2023Q2", time_period));\nb := dateadd(cast("2022Q1", time_period), 5, "M");\nc := getyear(cast("2022Q1", time_period));\nd := getmonth(cast("2020-12-14", date));\ne := dayofmonth(cast("2020-12-14", date));\nf := dayofyear(cast("2020-12-14", date));\ng := daytoyear(422);\nh := daytomonth(146);\ni := yeartoday(cast("P1Y20D", duration));\nj := monthtoday(cast("P3M10D", duration));'),_useState6=(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_useState5,2),script=_useState6[0],setScript=_useState6[1];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{padding:"20px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h3",{children:"Enhanced Editor Resizing Test"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("p",{children:"Test that the editor resizes without remounting. The editor should maintain its state (cursor position, selection, etc.) when resizing."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h4",{children:"Resize Controls:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[{label:"Small",height:"200px",width:"50%"},{label:"Medium",height:"300px",width:"75%"},{label:"Large",height:"400px",width:"100%"},{label:"Extra Large",height:"500px",width:"100%"}].map((function(button){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("button",{onClick:function onClick(){setHeight(button.height),setWidth(button.width)},style:{padding:"8px 16px",backgroundColor:"#007acc",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:button.label},button.label)}))})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{style:{marginBottom:"20px"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("h4",{children:["Current Size: ",width," x ",height]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{style:{border:"2px solid #ccc",borderRadius:"4px",overflow:"hidden"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(EditorForStories,{script,setScript,height,width,theme:"vs-dark",tools:(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)((0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)({},customTools),{},{initialRule:"start"}),shortcuts:{"ctrl+s, meta+s":function ctrlSMetaS(){return console.log("Save triggered")},"ctrl+enter, meta+enter":function ctrlEnterMetaEnter(){return console.log("Run triggered")}},displayFooter:!0,options:{lineNumbers:"on",minimap:{enabled:!0},readOnly:!1}})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{marginTop:"20px",padding:"10px",backgroundColor:"#f5f5f5",borderRadius:"4px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h4",{children:"Test Instructions:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("ol",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Click in the editor and position your cursor somewhere in the middle"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Select some text"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Click the resize buttons above"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Verify that your cursor position and selection are preserved"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:'Check the browser console - there should be no "Monaco InstantiationService disposal" errors'})]})]})]})}},LayoutChangeTest={render:function render(){var _useState7=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("horizontal"),_useState8=(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_useState7,2),layout=_useState8[0],setLayout=_useState8[1],_useState9=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('ds_out := ds_in [calc r := random(150, 20)]\n                [calc c := case when r < 0.2 then "Low" when r > 0.8 then "High" else "Medium"];'),_useState10=(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_useState9,2),script=_useState10[0],setScript=_useState10[1];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{padding:"20px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h3",{children:"Layout Change Test"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("p",{children:"Simulate layout changes that might occur in a real application. The editor should not remount when the layout changes."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h4",{children:"Layout Controls:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("button",{onClick:function onClick(){return setLayout("horizontal")},style:{padding:"8px 16px",backgroundColor:"horizontal"===layout?"#007acc":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Horizontal Layout"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("button",{onClick:function onClick(){return setLayout("vertical")},style:{padding:"8px 16px",backgroundColor:"vertical"===layout?"#007acc":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Vertical Layout"})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{display:"horizontal"===layout?"flex":"block",gap:"10px",height:"400px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{flex:"horizontal"===layout?"1":"none",height:"vertical"===layout?"200px":"100%"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h4",{children:"Editor Panel"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{style:{border:"2px solid #ccc",borderRadius:"4px",overflow:"hidden",height:"calc(100% - 30px)"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(EditorForStories,{script,setScript,height:"100%",width:"100%",theme:"vs-dark",tools:(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)((0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)({},customTools),{},{initialRule:"start"}),shortcuts:{"ctrl+s, meta+s":function ctrlSMetaS(){return console.log("Save triggered")},"ctrl+enter, meta+enter":function ctrlEnterMetaEnter(){return console.log("Run triggered")}},displayFooter:!0,options:{lineNumbers:"on",minimap:{enabled:!0},readOnly:!1}})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{flex:"horizontal"===layout?"1":"none",height:"vertical"===layout?"200px":"100%",backgroundColor:"#f5f5f5",padding:"10px",borderRadius:"4px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h4",{children:"Side Panel"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("p",{children:"This panel simulates other UI elements that might cause layout changes."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("p",{children:["Current layout: ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("strong",{children:layout})]})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{marginTop:"20px",padding:"10px",backgroundColor:"#f5f5f5",borderRadius:"4px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h4",{children:"Test Instructions:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("ol",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Click in the editor and position your cursor"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Type some text or select existing text"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Switch between horizontal and vertical layouts"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Verify that the editor content and cursor position are preserved"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Check the browser console for any disposal errors"})]})]})]})}},ErrorBoundaryTest={render:function render(){var _useState11=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("ds_out := ds_in [calc r := random(150, 20)]"),_useState12=(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_useState11,2),script=_useState12[0],setScript=_useState12[1],_useState13=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),_useState14=(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_useState13,2),forceError=_useState14[0],setForceError=_useState14[1];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{padding:"20px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h3",{children:"Error Boundary Test"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("p",{children:"Test the error handling capabilities of the Enhanced Editor."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{style:{marginBottom:"20px"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("button",{onClick:function onClick(){return setForceError(!forceError)},style:{padding:"8px 16px",backgroundColor:forceError?"#ff4444":"#007acc",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:forceError?"Disable Error Simulation":"Simulate Monaco Error"})}),forceError&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{padding:"10px",backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",borderRadius:"4px",marginBottom:"20px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("strong",{children:"Error Simulation Active:"})," This will trigger Monaco disposal errors to test the error handling and recovery mechanisms."]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{style:{border:"2px solid #ccc",borderRadius:"4px",overflow:"hidden",height:"400px"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(EditorForStories,{script,setScript,height:"100%",width:"100%",theme:"vs-dark",tools:(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)((0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)({},customTools),{},{initialRule:"start"}),shortcuts:{"ctrl+s, meta+s":function ctrlSMetaS(){return console.log("Save triggered")},"ctrl+enter, meta+enter":function ctrlEnterMetaEnter(){return console.log("Run triggered")}},displayFooter:!0,options:{lineNumbers:"on",minimap:{enabled:!0},readOnly:!1}})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{marginTop:"20px",padding:"10px",backgroundColor:"#f5f5f5",borderRadius:"4px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h4",{children:"Test Instructions:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("ol",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Position your cursor and type some text"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:'Click "Simulate Monaco Error" to trigger disposal errors'}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Verify that the editor recovers gracefully"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Check that your content and cursor position are preserved"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Monitor the browser console for error handling messages"})]})]})]})}},__namedExportsOrder=["Default","ResizingTest","LayoutChangeTest","ErrorBoundaryTest"]},"./src/stories/ImprovedEditor.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,ErrorBoundaryTest:()=>ErrorBoundaryTest,LayoutChangeTest:()=>LayoutChangeTest,ResizingTest:()=>ResizingTest,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_Editor__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/Editor.tsx"),_making_sense_vtl_2_1_antlr_tools_ts__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@making-sense/vtl-2-1-antlr-tools-ts/lib/index.js"),_making_sense_vtl_2_1_monaco_tools_ts__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@making-sense/vtl-2-1-monaco-tools-ts/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js"),customTools=(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)((0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)({},_making_sense_vtl_2_1_antlr_tools_ts__WEBPACK_IMPORTED_MODULE_2__),{},{getSuggestionsFromRange:_making_sense_vtl_2_1_monaco_tools_ts__WEBPACK_IMPORTED_MODULE_3__.getSuggestionsFromRange,monarchDefinition:_making_sense_vtl_2_1_monaco_tools_ts__WEBPACK_IMPORTED_MODULE_3__.monarchDefinition}),EditorForStories=function EditorForStories(props){var _props$initialRule=props.initialRule,initialRule=void 0===_props$initialRule?"start":_props$initialRule;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Editor__WEBPACK_IMPORTED_MODULE_1__.Z,(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)((0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)({},props),{},{tools:(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)((0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)({},customTools),{},{initialRule})}))};const __WEBPACK_DEFAULT_EXPORT__={title:"EnhancedEditor",component:EditorForStories,tags:["autodocs"]};var Default={args:{initialRule:"start"},argTypes:{initialRule:{control:"select",options:["start","expr"]}}},ResizingTest={render:function render(){var _useState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("300px"),_useState2=(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_useState,2),height=_useState2[0],setHeight=_useState2[1],_useState3=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("100%"),_useState4=(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_useState3,2),width=_useState4[0],setWidth=_useState4[1],_useState5=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('ds_out := ds_in [calc r := random(150, 20)]\n                [calc c := case when r < 0.2 then "Low" when r > 0.8 then "High" else "Medium"];\na := datediff(cast("2022Q1", time_period), cast("2023Q2", time_period));\nb := dateadd(cast("2022Q1", time_period), 5, "M");\nc := getyear(cast("2022Q1", time_period));\nd := getmonth(cast("2020-12-14", date));\ne := dayofmonth(cast("2020-12-14", date));\nf := dayofyear(cast("2020-12-14", date));\ng := daytoyear(422);\nh := daytomonth(146);\ni := yeartoday(cast("P1Y20D", duration));\nj := monthtoday(cast("P3M10D", duration));'),_useState6=(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_useState5,2),script=_useState6[0],setScript=_useState6[1];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{padding:"20px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h3",{children:"Enhanced Editor Resizing Test"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("p",{children:"Test that the editor resizes without remounting. The editor should maintain its state (cursor position, selection, etc.) when resizing."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h4",{children:"Resize Controls:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[{label:"Small",height:"200px",width:"50%"},{label:"Medium",height:"300px",width:"75%"},{label:"Large",height:"400px",width:"100%"},{label:"Extra Large",height:"500px",width:"100%"}].map((function(button){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("button",{onClick:function onClick(){setHeight(button.height),setWidth(button.width)},style:{padding:"8px 16px",backgroundColor:"#007acc",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:button.label},button.label)}))})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{style:{marginBottom:"20px"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("h4",{children:["Current Size: ",width," x ",height]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{style:{border:"2px solid #ccc",borderRadius:"4px",overflow:"hidden"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(EditorForStories,{script,setScript,height,width,theme:"vs-dark",tools:(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)((0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)({},customTools),{},{initialRule:"start"}),shortcuts:{"ctrl+s, meta+s":function ctrlSMetaS(){return console.log("Save triggered")},"ctrl+enter, meta+enter":function ctrlEnterMetaEnter(){return console.log("Run triggered")}},displayFooter:!0,options:{lineNumbers:"on",minimap:{enabled:!0},readOnly:!1}})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{marginTop:"20px",padding:"10px",backgroundColor:"#f5f5f5",borderRadius:"4px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h4",{children:"Test Instructions:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("ol",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Click in the editor and position your cursor somewhere in the middle"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Select some text"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Click the resize buttons above"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Verify that your cursor position and selection are preserved"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:'Check the browser console - there should be no "Monaco InstantiationService disposal" errors'})]})]})]})}},LayoutChangeTest={render:function render(){var _useState7=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("horizontal"),_useState8=(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_useState7,2),layout=_useState8[0],setLayout=_useState8[1],_useState9=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('ds_out := ds_in [calc r := random(150, 20)]\n                [calc c := case when r < 0.2 then "Low" when r > 0.8 then "High" else "Medium"];'),_useState10=(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_useState9,2),script=_useState10[0],setScript=_useState10[1];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{padding:"20px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h3",{children:"Layout Change Test"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("p",{children:"Simulate layout changes that might occur in a real application. The editor should not remount when the layout changes."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h4",{children:"Layout Controls:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("button",{onClick:function onClick(){return setLayout("horizontal")},style:{padding:"8px 16px",backgroundColor:"horizontal"===layout?"#007acc":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Horizontal Layout"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("button",{onClick:function onClick(){return setLayout("vertical")},style:{padding:"8px 16px",backgroundColor:"vertical"===layout?"#007acc":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Vertical Layout"})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{display:"horizontal"===layout?"flex":"block",gap:"10px",height:"400px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{flex:"horizontal"===layout?"1":"none",height:"vertical"===layout?"200px":"100%"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h4",{children:"Editor Panel"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{style:{border:"2px solid #ccc",borderRadius:"4px",overflow:"hidden",height:"calc(100% - 30px)"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(EditorForStories,{script,setScript,height:"100%",width:"100%",theme:"vs-dark",tools:(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)((0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)({},customTools),{},{initialRule:"start"}),shortcuts:{"ctrl+s, meta+s":function ctrlSMetaS(){return console.log("Save triggered")},"ctrl+enter, meta+enter":function ctrlEnterMetaEnter(){return console.log("Run triggered")}},displayFooter:!0,options:{lineNumbers:"on",minimap:{enabled:!0},readOnly:!1}})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{flex:"horizontal"===layout?"1":"none",height:"vertical"===layout?"200px":"100%",backgroundColor:"#f5f5f5",padding:"10px",borderRadius:"4px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h4",{children:"Side Panel"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("p",{children:"This panel simulates other UI elements that might cause layout changes."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("p",{children:["Current layout: ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("strong",{children:layout})]})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{marginTop:"20px",padding:"10px",backgroundColor:"#f5f5f5",borderRadius:"4px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h4",{children:"Test Instructions:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("ol",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Click in the editor and position your cursor"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Type some text or select existing text"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Switch between horizontal and vertical layouts"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Verify that the editor content and cursor position are preserved"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Check the browser console for any disposal errors"})]})]})]})}},ErrorBoundaryTest={render:function render(){var _useState11=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("ds_out := ds_in [calc r := random(150, 20)]"),_useState12=(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_useState11,2),script=_useState12[0],setScript=_useState12[1],_useState13=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),_useState14=(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_useState13,2),forceError=_useState14[0],setForceError=_useState14[1];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{padding:"20px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h3",{children:"Error Boundary Test"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("p",{children:"Test the error handling capabilities of the Enhanced Editor."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{style:{marginBottom:"20px"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("button",{onClick:function onClick(){return setForceError(!forceError)},style:{padding:"8px 16px",backgroundColor:forceError?"#ff4444":"#007acc",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:forceError?"Disable Error Simulation":"Simulate Monaco Error"})}),forceError&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{padding:"10px",backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",borderRadius:"4px",marginBottom:"20px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("strong",{children:"Error Simulation Active:"})," This will trigger Monaco disposal errors to test the error handling and recovery mechanisms."]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{style:{border:"2px solid #ccc",borderRadius:"4px",overflow:"hidden",height:"400px"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(EditorForStories,{script,setScript,height:"100%",width:"100%",theme:"vs-dark",tools:(0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)((0,_home_runner_work_ANTLR_Editor_ANTLR_Editor_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)({},customTools),{},{initialRule:"start"}),shortcuts:{"ctrl+s, meta+s":function ctrlSMetaS(){return console.log("Save triggered")},"ctrl+enter, meta+enter":function ctrlEnterMetaEnter(){return console.log("Run triggered")}},displayFooter:!0,options:{lineNumbers:"on",minimap:{enabled:!0},readOnly:!1}})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{style:{marginTop:"20px",padding:"10px",backgroundColor:"#f5f5f5",borderRadius:"4px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h4",{children:"Test Instructions:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("ol",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Position your cursor and type some text"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:'Click "Simulate Monaco Error" to trigger disposal errors'}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Verify that the editor recovers gracefully"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Check that your content and cursor position are preserved"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("li",{children:"Monitor the browser console for error handling messages"})]})]})]})}},__namedExportsOrder=["Default","ResizingTest","LayoutChangeTest","ErrorBoundaryTest"]},"./src/stories/VtlEditor20.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,Enriched:()=>Enriched,Styled:()=>Styled,WithInvalidScript:()=>WithInvalidScript,__namedExportsOrder:()=>__namedExportsOrder,default:()=>VtlEditor20_stories});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Editor=__webpack_require__("./src/Editor.tsx"),lib=__webpack_require__("./node_modules/@making-sense/vtl-2-0-antlr-tools-ts/lib/index.js"),vtl_2_0_monaco_tools_ts=__webpack_require__("./node_modules/@making-sense/vtl-2-0-monaco-tools-ts/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),customTools=(0,objectSpread2.Z)((0,objectSpread2.Z)({},lib),{},{getSuggestionsFromRange:vtl_2_0_monaco_tools_ts.getSuggestionsFromRange,monarchDefinition:vtl_2_0_monaco_tools_ts.monarchDefinition});const stories_VtlEditor20=function EditorForStories(props){var _props$initialRule=props.initialRule,initialRule=void 0===_props$initialRule?"start":_props$initialRule;return(0,jsx_runtime.jsx)(Editor.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({},props),{},{tools:(0,objectSpread2.Z)((0,objectSpread2.Z)({},customTools),{},{initialRule})}))};try{VtlEditor20.displayName="VtlEditor20",VtlEditor20.__docgenInfo={description:"",displayName:"VtlEditor20",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/stories/VtlEditor20.tsx#VtlEditor20"]={docgenInfo:VtlEditor20.__docgenInfo,name:"VtlEditor20",path:"src/stories/VtlEditor20.tsx#VtlEditor20"})}catch(__react_docgen_typescript_loader_error){}const VtlEditor20_stories={title:"VtlEditor-2.0",component:stories_VtlEditor20,tags:["autodocs"]};var Default={args:{initialRule:"start"},argTypes:{initialRule:{control:"select",options:["start","expr"]}}},WithInvalidScript={args:{initialRule:"start",script:"ds := "},argTypes:{initialRule:{control:"select",options:["start","expr"]}}},Styled={args:{initialRule:"start",theme:"vs-dark",height:"50vh",width:"80%",options:{lineNumbers:!0,minimap:{enabled:!0},readOnly:!1}},argTypes:{initialRule:{control:"select",options:["start","expr"]},theme:{control:"select",options:["vs-dark","vs-light"]},options:{control:"object"}}},VariableType=function(VariableType){return VariableType.STRING="STRING",VariableType.INTEGER="INTEGER",VariableType.NUMBER="NUMBER",VariableType.BOOLEAN="BOOLEAN",VariableType}(VariableType||{}),VariableRole=function(VariableRole){return VariableRole.IDENTIFIER="IDENTIFIER",VariableRole.MEASURE="MEASURE",VariableRole.DIMENSION="DIMENSION",VariableRole}(VariableRole||{}),Enriched={args:{initialRule:"start",variables:{name:{type:VariableType.STRING,role:VariableRole.IDENTIFIER},age:{type:VariableType.INTEGER,role:VariableRole.MEASURE}},variablesInputURLs:["https://raw.githubusercontent.com/Making-Sense-Info/ANTLR-Editor/gh-pages/samples/variablesInputFile1.json","https://raw.githubusercontent.com/Making-Sense-Info/ANTLR-Editor/gh-pages/samples/variablesInputFile2.json"],shortcuts:{"ctrl+s, meta+s":function ctrlSMetaS(){console.log("Save triggered!")},"ctrl+enter, meta+enter":function ctrlEnterMetaEnter(){console.log("Run triggered!")}},FooterComponent:function FooterComponent(_ref){var cursor=_ref.cursor;return(0,jsx_runtime.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",fontFamily:"monospace",width:"100%"},children:[(0,jsx_runtime.jsx)("div",{children:"Custom footer"}),(0,jsx_runtime.jsxs)("div",{children:["Line ",cursor.line," - Column ",cursor.column,cursor.selectionLength>0&&(0,jsx_runtime.jsxs)("span",{children:[" (",cursor.selectionLength," selected)"]})]})]})}},argTypes:{initialRule:{control:"select",options:["start","expr"]},variables:{control:"object"},variablesInputURLs:{control:"object"},displayFooter:{control:"boolean"}}},__namedExportsOrder=["Default","WithInvalidScript","Styled","Enriched"]},"./src/stories/VtlEditor21.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,Enriched:()=>Enriched,NewFeatures:()=>NewFeatures,Styled:()=>Styled,WithInvalidScript:()=>WithInvalidScript,__namedExportsOrder:()=>__namedExportsOrder,default:()=>VtlEditor21_stories});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Editor=__webpack_require__("./src/Editor.tsx"),lib=__webpack_require__("./node_modules/@making-sense/vtl-2-1-antlr-tools-ts/lib/index.js"),vtl_2_1_monaco_tools_ts=__webpack_require__("./node_modules/@making-sense/vtl-2-1-monaco-tools-ts/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),customTools=(0,objectSpread2.Z)((0,objectSpread2.Z)({},lib),{},{getSuggestionsFromRange:vtl_2_1_monaco_tools_ts.getSuggestionsFromRange,monarchDefinition:vtl_2_1_monaco_tools_ts.monarchDefinition});const stories_VtlEditor21=function EditorForStories(props){var _props$initialRule=props.initialRule,initialRule=void 0===_props$initialRule?"start":_props$initialRule;return(0,jsx_runtime.jsx)(Editor.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({},props),{},{tools:(0,objectSpread2.Z)((0,objectSpread2.Z)({},customTools),{},{initialRule})}))};try{VtlEditor21.displayName="VtlEditor21",VtlEditor21.__docgenInfo={description:"",displayName:"VtlEditor21",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/stories/VtlEditor21.tsx#VtlEditor21"]={docgenInfo:VtlEditor21.__docgenInfo,name:"VtlEditor21",path:"src/stories/VtlEditor21.tsx#VtlEditor21"})}catch(__react_docgen_typescript_loader_error){}const VtlEditor21_stories={title:"VtlEditor-2.1",component:stories_VtlEditor21,tags:["autodocs"]};var Default={args:{initialRule:"start"},argTypes:{initialRule:{control:"select",options:["start","expr"]}}},NewFeatures={args:{initialRule:"start",script:'ds_out := ds_in [calc r := random(150, 20)]\n                [calc c := case when r < 0.2 then "Low" when r > 0.8 then "High" else "Medium"];\na := datediff(cast("2022Q1", time_period), cast("2023Q2", time_period));\nb := dateadd(cast("2022Q1", time_period), 5, "M");\nc := getyear(cast("2022Q1", time_period));\nd := getmonth(cast("2020-12-14", date));\ne := dayofmonth(cast("2020-12-14", date));\nf := dayofyear(cast("2020-12-14", date));\ng := daytoyear(422);\nh := daytomonth(146);\ni := yeartoday(cast("P1Y20D", duration));\nj := monthtoday(cast("P3M10D", duration));'},argTypes:{initialRule:{control:"select",options:["start","expr"]}}},WithInvalidScript={args:{initialRule:"start",script:"ds := "},argTypes:{initialRule:{control:"select",options:["start","expr"]}}},Styled={args:{initialRule:"start",theme:"vs-dark",height:"50vh",width:"80%",options:{lineNumbers:!0,minimap:{enabled:!0},readOnly:!1}},argTypes:{initialRule:{control:"select",options:["start","expr"]},theme:{control:"select",options:["vs-dark","vs-light"]},options:{control:"object"}}},VariableType=function(VariableType){return VariableType.STRING="STRING",VariableType.INTEGER="INTEGER",VariableType.NUMBER="NUMBER",VariableType.BOOLEAN="BOOLEAN",VariableType}(VariableType||{}),VariableRole=function(VariableRole){return VariableRole.IDENTIFIER="IDENTIFIER",VariableRole.MEASURE="MEASURE",VariableRole.DIMENSION="DIMENSION",VariableRole}(VariableRole||{}),Enriched={args:{initialRule:"start",variables:{name:{type:VariableType.STRING,role:VariableRole.IDENTIFIER},age:{type:VariableType.INTEGER,role:VariableRole.MEASURE}},variablesInputURLs:["https://raw.githubusercontent.com/Making-Sense-Info/ANTLR-Editor/gh-pages/samples/variablesInputFile1.json","https://raw.githubusercontent.com/Making-Sense-Info/ANTLR-Editor/gh-pages/samples/variablesInputFile2.json"]},argTypes:{initialRule:{control:"select",options:["start","expr"]},variables:{control:"object"},variablesInputURLs:{control:"object"}}},__namedExportsOrder=["Default","NewFeatures","WithInvalidScript","Styled","Enriched"]},"./.storybook/preview.js-generated-config-entry.js":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,{__namedExportsOrder:()=>preview_namedExportsOrder,parameters:()=>parameters});var ClientApi=__webpack_require__("./node_modules/@storybook/client-api/dist/esm/ClientApi.js"),esm=__webpack_require__("./node_modules/@storybook/theming/dist/esm/index.js");__webpack_require__("./node_modules/react/index.js");const antlr_logo=__webpack_require__.p+"static/media/antlr-logo.ed86917b26ec6c376f4c1632fba37e52.svg";var darkTheme=(0,esm.create)({base:"dark",brandTitle:"ANTLR Editor",brandImage:antlr_logo,brandUrl:"https://github.com/Making-Sense-Info/ANTLR-Editor",appBg:"#323137",appContentBg:"#323137",barBg:"#323137",colorSecondary:"#9211ff",textColor:"#f1f0eb",textInverseColor:"#ffc0cb",fontBase:'"Montserrat", sans-serif',fontCode:"monospace"}),lightTheme=(0,esm.create)({base:"light",brandTitle:"ANTLR Editor",brandImage:antlr_logo,brandUrl:"https://github.com/Making-Sense-Info/ANTLR-Editor",appBg:"#f2f2f3",appContentBg:"#f2f2f3",barBg:"#f2f2f3",colorSecondary:"#9211ff",textColor:"#0F417A",textInverseColor:"#ffc0cb",fontBase:'"Montserrat", sans-serif',fontCode:"monospace"}),objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),dist_esm=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),dist=__webpack_require__("./node_modules/storybook-dark-mode/dist/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),DocsContainer=function DocsContainer(_ref){var children=_ref.children,context=_ref.context,dark=(0,dist.useDarkMode)();return(0,jsx_runtime.jsx)(dist_esm.Zu,{context:(0,objectSpread2.Z)((0,objectSpread2.Z)({},context),{},{storyById:function storyById(id){var _storyContext$paramet,storyContext=context.storyById(id);return(0,objectSpread2.Z)((0,objectSpread2.Z)({},storyContext),{},{parameters:(0,objectSpread2.Z)((0,objectSpread2.Z)({},null==storyContext?void 0:storyContext.parameters),{},{docs:(0,objectSpread2.Z)((0,objectSpread2.Z)({},null==storyContext||null===(_storyContext$paramet=storyContext.parameters)||void 0===_storyContext$paramet?void 0:_storyContext$paramet.docs),{},{theme:dark?darkTheme:lightTheme})})})}}),children})};DocsContainer.__docgenInfo={description:"",methods:[],displayName:"DocsContainer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES[".storybook/DocsContainer.js"]={name:"DocsContainer",docgenInfo:DocsContainer.__docgenInfo,path:".storybook/DocsContainer.js"});var parameters={actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}},backgrounds:{disable:!0},darkMode:{stylePreview:!0,light:lightTheme,dark:darkTheme,current:"dark"},docs:{container:DocsContainer},options:{storySort:function storySort(a,b){return a[0]<b[0]?-1:1}}},preview_namedExportsOrder=["parameters"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":return(0,ClientApi.uc)(value);case"argTypes":return(0,ClientApi.v9)(value);case"decorators":return value.forEach((function(decorator){return(0,ClientApi.$9)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return(0,ClientApi.HZ)(loader,!1)}));case"parameters":return(0,ClientApi.h1)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return(0,ClientApi.My)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return(0,ClientApi._C)(enhancer)}));case"render":return(0,ClientApi.$P)(value);case"globals":case"globalTypes":var v={};return v[key]=value,(0,ClientApi.h1)(v,!1);case"__namedExportsOrder":case"decorateStory":case"renderToDOM":return null;default:return console.log(key+" was not supported :( !")}}))},"./src/Editor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>src_Editor});var toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/@monaco-editor/react/dist/index.mjs"),editor_api=__webpack_require__("./node_modules/monaco-editor/esm/vs/editor/editor.api.js"),editor_main=__webpack_require__("./node_modules/monaco-editor/esm/vs/editor/editor.main.js"),classCallCheck=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),createClass=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/createClass.js"),antlr4ng_dist=__webpack_require__("./node_modules/@making-sense/antlr4ng/dist/index.js"),browser=__webpack_require__("./node_modules/debug/src/browser.js"),browser_default=__webpack_require__.n(browser),Log=function(){function Log(){(0,classCallCheck.Z)(this,Log)}return(0,createClass.Z)(Log,null,[{key:"message",value:function message(level,_message,source){var namespace="VRM: ".concat(level),logger=browser_default()(namespace);logger.color=Log.colors[level],source?logger(source,_message):logger(_message)}},{key:"info",value:function info(message,source){return Log.message("info",message,source)}},{key:"warn",value:function warn(message,source){return Log.message("warning",message,source)}},{key:"error",value:function error(message,source){return Log.message("error",message,source)}}]),Log}();Log.colors={info:"lightblue",warning:"orange",error:"red"};var ConsoleErrorListener=function(){function ConsoleErrorListener(){(0,classCallCheck.Z)(this,ConsoleErrorListener)}return(0,createClass.Z)(ConsoleErrorListener,[{key:"syntaxError",value:function syntaxError(recognizer,offendingSymbol,line,column,msg){Log.info("ERROR "+msg,"ParserFacadeV3")}}]),ConsoleErrorListener}(),Error=(0,createClass.Z)((function Error(startLine,endLine,startCol,endCol,message){(0,classCallCheck.Z)(this,Error),this.startLine=void 0,this.endLine=void 0,this.startCol=void 0,this.endCol=void 0,this.message=void 0,this.startLine=startLine,this.endLine=endLine,this.startCol=startCol,this.endCol=endCol,this.message=message})),CollectorErrorListener=function(){function CollectorErrorListener(errors){(0,classCallCheck.Z)(this,CollectorErrorListener),this.errors=[],this.errors=errors}return(0,createClass.Z)(CollectorErrorListener,[{key:"syntaxError",value:function syntaxError(recognizer,offendingSymbol,line,column,msg){var endColumn=column+1;null!==offendingSymbol._text&&void 0!==offendingSymbol._text&&(endColumn=column+offendingSymbol._text.length),this.errors.push(new Error(line,line,column,endColumn,msg))}}]),CollectorErrorListener}(),createLexer=function createLexer(Lexer){return function(input){var chars=antlr4ng_dist.CharStream.fromString(input||"");return new Lexer(chars)}},createParserFromLexer=function createParserFromLexer(Parser){return function(lexer){var tokens=new antlr4ng_dist.CommonTokenStream(lexer);return new Parser(tokens)}},MultiplyMode=function(MultiplyMode){return MultiplyMode[MultiplyMode.None=0]="None",MultiplyMode[MultiplyMode.Optional=1]="Optional",MultiplyMode[MultiplyMode.Onemore=2]="Onemore",MultiplyMode[MultiplyMode.Zeromore=3]="Zeromore",MultiplyMode}({});function mergeMultiplyMode(first,second){return first!==second&&second!==MultiplyMode.None?first===MultiplyMode.None?second:MultiplyMode.Zeromore:first}var TokenType=function(TokenType){return TokenType.Space=" ",TokenType.Lparen="(",TokenType.Rparen=")",TokenType.Question="?",TokenType.Star="*",TokenType.Plus="+",TokenType.Pipe="|",TokenType.Hash="#",TokenType.Assign="=",TokenType.PlusAssign="+=",TokenType.Keyword="k",TokenType.Operator="o",TokenType.Operand="d",TokenType.Identifier="i",TokenType.Label="l",TokenType.Rule="r",TokenType.Unknown="u",TokenType}({}),RuleToken=function(){function RuleToken(type,nested,name,value){(0,classCallCheck.Z)(this,RuleToken),this.type=void 0,this.name=void 0,this.value=void 0,this.identifier=void 0,this.nested=0,this.multiplied=MultiplyMode.None,this.greedy=!0,this.sibling=void 0,this.type=type,nested&&(this.nested=nested),name&&(this.name=name),value&&(this.value=value)}return(0,createClass.Z)(RuleToken,[{key:"multiply",value:function multiply(type){var multiplied;switch(type){case TokenType.Question:multiplied=MultiplyMode.Optional;break;case TokenType.Plus:multiplied=MultiplyMode.Onemore;break;case TokenType.Star:multiplied=MultiplyMode.Zeromore;break;default:return}this.multiplied!==multiplied&&(this.multiplied=this.multiplied===MultiplyMode.None?multiplied:MultiplyMode.Zeromore)}},{key:"label",value:function label(identifier){this.identifier=identifier}},{key:"isAssign",value:function isAssign(){return this.type===TokenType.Assign||this.type===TokenType.PlusAssign}},{key:"isAtom",value:function isAtom(){return this.type===TokenType.Keyword||this.type===TokenType.Operator||this.type===TokenType.Operand||this.type===TokenType.Rule||this.type===TokenType.Unknown}}]),RuleToken}(),rgxEscape=/[-/\\^$*+?.()|[\]{}]/g,RuleTokenizer=function(){function RuleTokenizer(vocabulary){(0,classCallCheck.Z)(this,RuleTokenizer),this.vocabulary=void 0,this.context={tokens:[],parens:[],atom:[],modifier:void 0},this.vocabulary=vocabulary}return(0,createClass.Z)(RuleTokenizer,[{key:"tokenize",value:function tokenize(declaration){var _this=this;return this.clearContext(),Array.from(declaration).forEach((function(value,index){if(!_this.isAtom(value,index)&&!_this.isModifier(value,index))switch(value){case TokenType.Lparen:var token=new RuleToken(TokenType.Lparen,_this.context.parens.length);_this.context.parens.push(token),_this.context.tokens.push(token);break;case TokenType.Rparen:var lparen=_this.context.parens.pop();if(lparen){var lindex=_this.context.tokens.indexOf(lparen);if(lindex!==_this.context.tokens.length-2){var rparen=new RuleToken(TokenType.Rparen,_this.context.parens.length);lparen.sibling=rparen,rparen.sibling=lparen,_this.context.tokens.push(rparen)}else{var last=_this.lastToken();last&&last.nested--,_this.context.tokens.splice(lindex,1)}}else _this.unexpected(value,index);break;case TokenType.Pipe:_this.addToken(value);break;case TokenType.Assign:var _last=_this.lastToken([TokenType.Unknown]);_last&&(_last.type=TokenType.Identifier,_this.addToken(value),Log.warn("Unknown operator token "+_last.name+" recognized as identifier","RuleTokenizer"));break;case TokenType.Hash:_this.addToken(value);break;case TokenType.Space:_this.finishAtom(index);break;default:_this.unexpected(value,index)}})),this.finishAtom(declaration.length),this.context.tokens}},{key:"isAtom",value:function isAtom(value,index){return/[a-zA-Z_0-9]/.test(value)?(this.context.atom.push(value),!0):(this.finishAtom(index),!1)}},{key:"isModifier",value:function isModifier(value,index){if(/[*+?]/.test(value)){var last=this.lastToken([TokenType.Keyword,TokenType.Operator,TokenType.Operand,TokenType.Rule,TokenType.Rparen,TokenType.Unknown]);return this.context.modifier?(value===TokenType.Question&&last?last.greedy=!1:this.unexpected(value,index),this.finishModifier()):last?(last.multiply(value),this.context.modifier=value):this.unexpected(value,index),!0}return this.finishModifier(),!1}},{key:"addToken",value:function addToken(type){this.context.tokens.push(new RuleToken(type,this.context.parens.length))}},{key:"finishAtom",value:function finishAtom(index){if(this.context.atom.length>0){var type,name=this.context.atom.join(""),value=void 0;if(index-=this.context.atom.length,this.lastToken([TokenType.Hash]))type=TokenType.Label;else if(this.vocabulary.isSymbolicName(name)){type=TokenType.Operand;var symbolicIndex=this.vocabulary.symbolicIndex(name);this.vocabulary.hasKeyword(symbolicIndex)?(type=TokenType.Keyword,value=this.vocabulary.keyword(symbolicIndex)):this.vocabulary.hasOperator(symbolicIndex)&&(type=TokenType.Operator,value=this.vocabulary.operator(symbolicIndex))}else name in antlr4ng_dist.Lexer?type=TokenType.Operator:this.vocabulary.isRuleName(name)?type=TokenType.Rule:(type=TokenType.Unknown,Log.warn("Unknown operator token "+name+" at "+index,"RuleTokenizer"));this.context.tokens.push(new RuleToken(type,this.context.parens.length,name,value)),this.context.atom.length=0}}},{key:"finishModifier",value:function finishModifier(){this.context.modifier=void 0}},{key:"unexpected",value:function unexpected(token,index){Log.error("Unexpected token "+token+" at "+index,"RuleTokenizer")}},{key:"clearContext",value:function clearContext(){this.context.tokens=[],this.context.parens=[],this.context.atom=[],this.context.modifier=void 0}},{key:"lastToken",value:function lastToken(filter){if(this.context.tokens.length>0){var last=this.context.tokens[this.context.tokens.length-1];if(last&&(!filter||filter.includes(last.type)))return last}}},{key:"ruleName",value:function ruleName(declaration,index){var ruleNames=this.vocabulary.getRuleNames();if(!ruleNames[index])return declaration;var rgx=new RegExp(ruleNames[index].replace(rgxEscape,"\\$&"),"g");return rgx.test(declaration)?ruleNames[index]:(Log.warn("Mismatched rule "+index+" name. Looking for alternatives.","RuleTokenizer"),ruleNames.forEach((function(ruleName,other){if((rgx=new RegExp(ruleName.replace(rgxEscape,"\\$&"),"g")).test(declaration))return Log.warn("Matched name of rule "+other+".","RuleTokenizer"),ruleName})),Log.error("No alternative for mismatched rule name.","RuleTokenizer"),declaration)}}],[{key:"alternatives",value:function alternatives(tokens){var pipeIndex=-1,statement=[];return tokens.reduce((function(statements,token,index,initial){return 0===token.nested&&token.type===TokenType.Pipe?(0!==(statement=initial.slice(pipeIndex+1,index)).length&&statements.push(statement),pipeIndex=index):index===initial.length-1&&0!==(statement=initial.slice(pipeIndex+1)).length&&statements.push(statement),statements}),[])}},{key:"parentheses",value:function parentheses(tokens){var parenIndex=-1,statement=[];return tokens.reduce((function(statements,token,index,initial){return 0!==token.nested||token.type!==TokenType.Lparen&&token.type!==TokenType.Rparen?index===initial.length-1&&0!==(statement=initial.slice(parenIndex+1)).length&&statements.push(statement):(0!==(statement=initial.slice(parenIndex,index+(token.type===TokenType.Rparen?1:0))).length&&statements.push(statement),parenIndex=index),statements}),[])}},{key:"unnest",value:function unnest(tokens){if(!tokens)return[];var left=tokens[0],right=tokens[tokens.length-1];return left.type===TokenType.Lparen&&right.type===TokenType.Rparen&&left.sibling===right&&(tokens.pop(),tokens.shift(),tokens.forEach((function(token){return token.nested--}))),tokens}}]),RuleTokenizer}(),StatementType=function(StatementType){return StatementType.Rule="r",StatementType.Block="b",StatementType.Operator="o",StatementType.Keyword="k",StatementType.Operand="d",StatementType.Unknown="u",StatementType}({}),SyntaxLink=function(){function SyntaxLink(value){var _this=this;(0,classCallCheck.Z)(this,SyntaxLink),this._type=StatementType.Unknown,this._chain=[],this._keywords=[],this._value="",this._syntax="",this._alternatives=!1,this._multiplied=MultiplyMode.None,this.hasKeyword=function(){return 0!==_this._keywords.length},this.hasChain=function(){return 0!==_this._chain.length},this.hasValue=function(){return""!==_this._value},this.isEmpty=function(){return!_this.hasChain()&&!_this.hasValue()},this.isMultiplied=function(){return _this._multiplied===MultiplyMode.Optional||_this._multiplied===MultiplyMode.Onemore||_this._multiplied===MultiplyMode.Zeromore},this.isOptional=function(){return _this._multiplied===MultiplyMode.Optional||_this._multiplied===MultiplyMode.Zeromore},value&&(this._value=value)}return(0,createClass.Z)(SyntaxLink,[{key:"add",value:function add(entry){var _this$_keywords;this._chain.push(entry),!this._alternatives&&this.hasKeyword()||(_this$_keywords=this._keywords).push.apply(_this$_keywords,(0,toConsumableArray.Z)(entry._keywords)),this._type=StatementType.Block,this.constructSyntax()}},{key:"addAll",value:function addAll(entries){var _this2=this;entries.forEach((function(entry){return _this2.add(entry)}))}},{key:"collapse",value:function collapse(){var _this3=this;if(this._chain=this._chain.filter((function(link){return!link.isEmpty()})),this._alternatives&&this._chain.length<2&&(this._alternatives=!1),1===this._chain.length&&this.overwrite(this._chain[0]),0!==this._chain.length){if(this._alternatives){var _this$_chain,added=[],removed=[];this._chain.forEach((function(link){link._alternatives&&(removed.push(link),link._chain.forEach((function(sublink){sublink._multiplied=mergeMultiplyMode(sublink._multiplied,link._multiplied),added.push(sublink)})))})),this._chain=this._chain.filter((function(link){return!removed.includes(link)})),(_this$_chain=this._chain).push.apply(_this$_chain,added)}else if(this._chain[0].isAlternativeKeywords()){this._alternatives=!0;var link=this._chain.shift(),chain=this._chain;this._chain=[],link&&link._chain.forEach((function(sublink){sublink._multiplied=mergeMultiplyMode(sublink._multiplied,link._multiplied);var alternative=new SyntaxLink;alternative.add(sublink),alternative.addAll(chain),alternative.collapse(),_this3._chain.push(alternative)}))}this.constructSyntax()}}},{key:"overwrite",value:function overwrite(other){this._chain=other._chain,this._keywords=other._keywords,this._alternatives=other._alternatives,this._syntax=other._syntax,this._value=other._value,this._multiplied=mergeMultiplyMode(this._multiplied,other._multiplied),this._type=other._type}},{key:"constructSyntax",value:function constructSyntax(){this.hasValue()?(this._syntax=this.multiplyPrefix()+(this.isType([StatementType.Rule,StatementType.Operand])?""+this._value+"":this._value)+this.multiplyPostfix(),this.hasChain()&&Log.warn("Link with chain and value "+this._value,"SyntaxLink")):this._alternatives?this._syntax=(this.isMultiplied()?this.multiplyPrefix():"{")+this._chain.map((function(link){return link._syntax})).join(" | ")+(this.isMultiplied()?this.multiplyPostfix():"}"):this._syntax=(this.isMultiplied()?this.multiplyPrefix():"")+this._chain.map((function(link){return link._syntax})).join(" ")+(this.isMultiplied()?this.multiplyPostfix():"")}},{key:"multiplyPrefix",value:function multiplyPrefix(){switch(this._multiplied){case MultiplyMode.None:return"";case MultiplyMode.Optional:case MultiplyMode.Onemore:case MultiplyMode.Zeromore:return"{"}}},{key:"multiplyPostfix",value:function multiplyPostfix(){switch(this._multiplied){case MultiplyMode.None:return"";case MultiplyMode.Optional:return"}";case MultiplyMode.Onemore:return"}+";case MultiplyMode.Zeromore:return"}*"}}},{key:"contains",value:function contains(value){return this._chain.some((function(entry){return entry._value===value}))}},{key:"alternatives",get:function get(){return this._alternatives},set:function set(alternatives){this._alternatives=alternatives}},{key:"value",get:function get(){return this._value}},{key:"chain",get:function get(){return this._chain}},{key:"keyword",set:function set(value){this._value=value,this._keywords.push(this._value),this._type=StatementType.Keyword,this.constructSyntax()}},{key:"operator",set:function set(value){this._value=value,this._type=StatementType.Operator,this.constructSyntax()}},{key:"operand",set:function set(value){this._value=value.toLocaleLowerCase(),this._type=StatementType.Operand,this.constructSyntax()}},{key:"rule",set:function set(value){this._value=value,this._type=StatementType.Rule,this.constructSyntax()}},{key:"syntax",get:function get(){return this._syntax}},{key:"multiplied",get:function get(){return this._multiplied},set:function set(value){this._multiplied=value}},{key:"type",get:function get(){return this._type}},{key:"isType",value:function isType(types){return types.includes(this._type)}},{key:"isAlternativeKeywords",value:function isAlternativeKeywords(){return this._alternatives&&this.hasChain()&&this._chain.every((function(link){return link.isType([StatementType.Keyword])}))}},{key:"collectSyntax",value:function collectSyntax(keywords){keywords.createLevel(this.isOptional()),this._alternatives||this._chain.forEach((function(link){switch(link._type){case StatementType.Keyword:keywords.addKeyword(link._value,link._syntax,link._value,link.isOptional());break;case StatementType.Operator:link.isOptional()?keywords.append(link._syntax,""):keywords.append(link._syntax,link._value);break;case StatementType.Operand:case StatementType.Rule:keywords.append(link._syntax,"");break;case StatementType.Block:link.collectSyntax(keywords);break;default:Log.warn("Unknown syntax link type","SyntaxLink")}})),keywords.terminateLevel()}},{key:"unOption",value:function unOption(){if(this._multiplied=MultiplyMode.None,this._alternatives)this._chain.forEach((function(link){return link.unOption()}));else{var link=this._chain[0];link&&link.unOption()}}}]),SyntaxLink}(),GrammarStatement=function(){function GrammarStatement(type,tokens,name){(0,classCallCheck.Z)(this,GrammarStatement),this.type=StatementType.Unknown,this._name=void 0,this._label=void 0,this._value=void 0,this.alternatives=!1,this.unresolved=!1,this.multiplied=MultiplyMode.None,this.greedy=!1,this.statements=[],this.tokens=[],this.token=void 0,this.syntax=[],this.type=type,this.tokens=tokens,name&&(this._name=name)}return(0,createClass.Z)(GrammarStatement,[{key:"processRule",value:function processRule(){var _this=this;if(0!==this.tokens.length&&0===this.statements.length&&!this.token){var tokens=this.tokens;if(1!==tokens.length){var statements=RuleTokenizer.alternatives(tokens);1===statements.length?this.processRuleAlternative(statements[0]):statements.length>1&&(this.alternatives=!0,statements.forEach((function(statement){return _this.addRuleAlternative(statement)})))}else this.processToken(tokens[0])}}},{key:"addRuleAlternative",value:function addRuleAlternative(tokens){if(0!==tokens.length){var statement=new GrammarStatement(StatementType.Block,tokens);this.statements.push(statement),statement.processRuleAlternative(tokens)}}},{key:"processRuleAlternative",value:function processRuleAlternative(tokens){if(0!==tokens.length)if(1!==tokens.length){var hashIndex=tokens.findIndex((function(token){return token.type===TokenType.Hash}));hashIndex>-1&&(this._label=tokens.slice(hashIndex+1).map((function(token){return token.name})).join(""),tokens=tokens.slice(0,hashIndex)),this.processElements(tokens)}else this.processToken(tokens[0])}},{key:"processElements",value:function processElements(tokens){if(0!==tokens.length)if(1!==tokens.length)for(var i=0,length=tokens.length;i<tokens.length;){var token=tokens[i];switch(token.type){case TokenType.Identifier:if(i+2<length){var assign=tokens[++i],element=tokens[++i];if(assign.isAssign()){if(element.type===TokenType.Lparen&&element.sibling){element.label(token.name);var index=tokens.indexOf(element.sibling);index>i&&(this.addBlock(tokens.slice(i,index+1)),i=index);break}if(element.isAtom()){element.label(token.name),this.addAtom(element);break}}}Log.error("Missing or mismatched token(s) after identifier","GrammarStatement");break;case TokenType.Lparen:if(token.sibling){var _index=tokens.indexOf(token.sibling);_index>i&&(this.addBlock(tokens.slice(i,_index+1)),i=_index)}else Log.error("Missing right parenthesis token","GrammarStatement");break;default:token.isAtom()?this.addAtom(token):Log.warn("Unexpected token "+token.name+" of type "+token.type,"GrammarStatement")}i++}else this.processToken(tokens[0])}},{key:"addAtom",value:function addAtom(token){var statement=new GrammarStatement(StatementType.Unknown,[token]);this.statements.push(statement),statement.processToken(token)}},{key:"processToken",value:function processToken(token){switch(this.token=token,this._name=token.name,this._value=token.value,this.multiply(token),token.type){case TokenType.Rule:this.type=StatementType.Rule,this._label||(this._label=token.identifier),this.unresolved=!0;break;case TokenType.Keyword:this.type=StatementType.Keyword,this._label=token.identifier,this.unresolved=!0;break;case TokenType.Operator:this.type=StatementType.Operator,this._label=token.identifier,this.unresolved=!0;break;case TokenType.Operand:this.type=StatementType.Operand,this._label=token.identifier,this.unresolved=!0;break;default:Log.warn("Unexpected token "+token.name+" of type "+token.type,"GrammarStatement")}}},{key:"addBlock",value:function addBlock(tokens){if(0!==tokens.length){var statement=new GrammarStatement(StatementType.Block,tokens);this.statements.push(statement),statement.processBlock(tokens)}}},{key:"processBlock",value:function processBlock(tokens){var _this2=this,left=tokens[0],right=tokens[tokens.length-1];if(left.type===TokenType.Lparen&&right.type===TokenType.Rparen&&left.sibling===right){this.multiply(right),this._label=left.identifier,tokens=RuleTokenizer.unnest(tokens);var statements=RuleTokenizer.alternatives(tokens);1===statements.length?this.processElements(statements[0]):statements.length>1&&(this.alternatives=!0,statements.forEach((function(statement){return _this2.addAlternative(statement)})))}else Log.error("Missing parenthesis tokens in block","GrammarStatement")}},{key:"addAlternative",value:function addAlternative(tokens){if(0!==tokens.length){var statement=new GrammarStatement(StatementType.Block,tokens);this.statements.push(statement),statement.processElements(tokens)}}},{key:"resolveStatements",value:function resolveStatements(rules,operators,visited){if(this.name){if(visited.has(this.name))return;visited.set(this.name,this)}this.statements.forEach((function(statement,index,statements){if(statement.unresolved&&statement.name){if(statement.isToken([TokenType.Rule])){var rule=rules.get(statement.name);rule?(rule!==statement&&(!rule.label&&statement.label&&(rule.label=statement.label),statements[index]=rule),rule.resolveStatements(rules,operators,visited)):Log.warn("Unknown rule in graph "+statement.name,"GrammarStatement")}else if(statement.isToken([TokenType.Keyword,TokenType.Operator,TokenType.Operand])){var operator=operators.get(statement.name);operator?operator!==statement&&(statements[index]=operator):(statement.unresolved=!1,operators.set(statement.name,statement))}}else statement.resolveStatements(rules,operators,visited)}))}},{key:"resolveSyntax",value:function resolveSyntax(keywords){var _this3=this;switch(this.type){case StatementType.Rule:var link;if(this.alternatives)this.statements.forEach((function(statement){(link=statement.constructLink(!1)).hasKeyword()&&_this3.syntax.push(link)}));else{var syntax=new SyntaxLink;this.statements.forEach((function(statement){link=statement.constructLink(syntax.hasKeyword()),(syntax.hasKeyword()||link.hasKeyword())&&syntax.add(link)})),syntax.hasKeyword()&&this.syntax.push(syntax)}break;case StatementType.Keyword:var _syntax=new SyntaxLink;this.value?_syntax.keyword=this.value:Log.warn("Keyword without value "+this.name,"GrammarStatement"),this.syntax.push(_syntax);break;case StatementType.Operator:case StatementType.Operand:break;default:Log.warn("Unknown statement type "+this.type,"GrammarStatement")}if(this.alternatives){var _this$syntax,added=[],removed=[];this.syntax.forEach((function(link){link.alternatives&&(removed.push(link),link.chain.forEach((function(sublink){sublink.multiplied=mergeMultiplyMode(sublink.multiplied,link.multiplied),added.push(sublink)})))})),this.syntax=this.syntax.filter((function(link){return!removed.includes(link)})),(_this$syntax=this.syntax).push.apply(_this$syntax,added)}this.syntax.forEach((function(link){link.collapse(),link.unOption(),link.collectSyntax(keywords)}))}},{key:"constructLink",value:function constructLink(keyword){var syntax=new SyntaxLink;switch(syntax.multiplied=this.multiplied,this.type){case StatementType.Rule:1===this.statements.length?syntax=this.statements[0].constructLink(!1):this.name&&(syntax.rule=this.name);break;case StatementType.Block:if(1===this.statements.length){syntax=this.statements[0].constructLink(keyword);break}var link;this.alternatives?(syntax.alternatives=!0,this.statements.forEach((function(statement){link=statement.constructLink(keyword),(keyword||link.hasKeyword())&&syntax.add(link)}))):this.statements.forEach((function(statement){link=statement.constructLink(keyword||syntax.hasKeyword()),(keyword||syntax.hasKeyword()||link.hasKeyword())&&syntax.add(link)}));break;case StatementType.Keyword:this.value?syntax.keyword=this.value:Log.warn("Keyword without value "+this.name,"GrammarStatement");break;case StatementType.Operator:this.value?syntax.operator=this.value:Log.warn("Operator without value "+this.name,"GrammarStatement");break;case StatementType.Operand:this.name?syntax.operand=this.name:Log.warn("Operand without name","GrammarStatement");break;default:Log.warn("Unknown statement type "+this.type,"GrammarStatement")}return syntax.collapse(),syntax}},{key:"isOptional",value:function isOptional(){return this.multiplied===MultiplyMode.Optional||this.multiplied===MultiplyMode.Zeromore}},{key:"is",value:function is(type){return this.type===type}},{key:"name",get:function get(){return this._name}},{key:"label",get:function get(){return this._label},set:function set(label){this._label=label}},{key:"value",get:function get(){return this._value}},{key:"multiply",value:function multiply(token){this.greedy=this.greedy||token.greedy,this.multiplied!==token.multiplied&&token.multiplied!==MultiplyMode.None&&(this.multiplied=this.multiplied===MultiplyMode.None?token.multiplied:MultiplyMode.Zeromore)}},{key:"isToken",value:function isToken(types){return!!this.token&&types.includes(this.token.type)}}]),GrammarStatement}(),createForOfIteratorHelper=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js"),SyntaxCollection=function(){function SyntaxCollection(){var _this=this;(0,classCallCheck.Z)(this,SyntaxCollection),this.entries=[],this._levels=[],this.terminated=!1,this.isEmpty=function(){return 0===_this.entries.length},this.notEmpty=function(){return 0!==_this.entries.length},this.size=function(){return _this.entries.length}}return(0,createClass.Z)(SyntaxCollection,[{key:"addAll",value:function addAll(entries){var _this$entries;(_this$entries=this.entries).push.apply(_this$entries,(0,toConsumableArray.Z)(entries))}},{key:"createLevel",value:function createLevel(optional){var level=new SyntaxLevel(optional);return this._levels.unshift(level),level}},{key:"terminateLevel",value:function terminateLevel(){var _this$entries2,level=this._levels.shift();level&&(level.terminate(),(_this$entries2=this.entries).push.apply(_this$entries2,(0,toConsumableArray.Z)(level.entries)))}},{key:"addKeyword",value:function addKeyword(keyword,syntax,snippet,optional){var lastLevel=this._levels[0];if(lastLevel){var _step,_iterator=(0,createForOfIteratorHelper.Z)(this._levels);try{for(_iterator.s();!(_step=_iterator.n()).done;){var level=_step.value;if(optional?level.append("",syntax,""):level.append(keyword,syntax,snippet),level.optional)break}}catch(err){_iterator.e(err)}finally{_iterator.f()}var entry=new SyntaxEntry(keyword);optional&&entry.terminate(),lastLevel.add(entry)}}},{key:"append",value:function append(syntax,snippet){var _step2,_iterator2=(0,createForOfIteratorHelper.Z)(this._levels);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var level=_step2.value;if(level.append("",syntax,snippet),level.optional)break}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}},{key:"distinct",value:function distinct(){var distinct=new Map,entries=[];this.entries.forEach((function(entry){var subentries=distinct.get(entry.keyword);subentries?subentries.some((function(subentry){return subentry.equals(entry)}))||(subentries.push(entry),entries.push(entry)):((subentries=[]).push(entry),distinct.set(entry.keyword,subentries),entries.push(entry))})),this.entries=entries}}]),SyntaxCollection}(),SyntaxLevel=function(){function SyntaxLevel(optional){(0,classCallCheck.Z)(this,SyntaxLevel),this.entries=[],this.optional=!1,this.optional=optional}return(0,createClass.Z)(SyntaxLevel,[{key:"add",value:function add(entry){this.entries.push(entry)}},{key:"append",value:function append(keyword,syntax,snippet){this.entries.forEach((function(entry){entry.append(keyword,syntax,snippet)}))}},{key:"terminate",value:function terminate(){this.entries.forEach((function(entry){return entry.terminate()}))}}]),SyntaxLevel}(),SyntaxEntry=function(){function SyntaxEntry(keyword){(0,classCallCheck.Z)(this,SyntaxEntry),this._keyword=void 0,this._syntax=void 0,this._snippet=void 0,this._markdown={value:""},this._terminated=!1,this._kind=editor_main.languages.CompletionItemKind.Keyword,this.round=!1,this.openRound=0,this.square=!1,this.openSquare=0,this.curly=!1,this.openCurly=0,this.angle=!1,this.openAngle=0,this._keyword=keyword,this._syntax=keyword,this._snippet=keyword}return(0,createClass.Z)(SyntaxEntry,[{key:"terminate",value:function terminate(){this._terminated=!0}},{key:"keyword",get:function get(){return this._keyword}},{key:"syntax",get:function get(){return this._syntax}},{key:"markdown",get:function get(){return this._markdown}},{key:"snippet",get:function get(){return this._snippet}},{key:"terminated",get:function get(){return this._terminated}},{key:"append",value:function append(keyword,syntax,snippet){if(!this._terminated)switch(this._keyword===this._syntax&&""!==keyword&&(this._keyword=this._keyword+" "+keyword),syntax){case"(":this.round=!0,this.openRound++,this._syntax=this._syntax+" "+syntax,this._snippet=this._snippet+" "+snippet;break;case")":this.round&&this.openRound>0?(this.openRound--,this.round=this.openRound>0,this._syntax=this._syntax+" "+syntax,this._snippet=this._snippet+" "+snippet):this.terminate();break;case"[":this.square=!0,this.openSquare++,this._syntax=this._syntax+" "+syntax,this._snippet=this._snippet+" "+snippet;break;case"]":this.square&&this.openSquare>0?(this.openSquare--,this.square=this.openSquare>0,this._syntax=this._syntax+" "+syntax,this._snippet=this._snippet+" "+snippet):this.terminate();break;case"{":this.curly=!0,this.openCurly++,this._syntax=this._syntax+" "+syntax,this._snippet=this._snippet+" "+snippet;break;case"}":this.curly&&this.openCurly>0?(this.openCurly--,this.curly=this.openCurly>0,this._syntax=this._syntax+" "+syntax,this._snippet=this._snippet+" "+snippet):this.terminate();break;case"<":this.angle=!0,this.openAngle++,this._syntax=this._syntax+" "+syntax,this._snippet=this._snippet+" "+snippet;break;case">":this.angle&&this.openAngle>0?(this.openAngle--,this.angle=this.openAngle>0,this._syntax=this._syntax+" "+syntax,this._snippet=this._snippet+" "+snippet):this.terminate();break;default:this._syntax=this._syntax+(""!==syntax?" "+syntax:""),this._snippet=this._snippet+(""!==snippet?" "+snippet:"")}}},{key:"equals",value:function equals(entry){return this._keyword===entry._keyword&&this._syntax===entry._syntax&&this._snippet===entry._snippet&&this._terminated===entry._terminated}},{key:"completionKind",value:function completionKind(){return this._kind}}]),SyntaxEntry}(),GrammarGraph=function(){function GrammarGraph(vocabulary,grammar){(0,classCallCheck.Z)(this,GrammarGraph),this.vocabulary=void 0,this.tokenizer=void 0,this.rules=new Map,this.operators=new Map,this.keywords=new SyntaxCollection,this.root=void 0,this.vocabulary=vocabulary,this.tokenizer=new RuleTokenizer(vocabulary),grammar&&grammar.length>0&&this.processRaw(grammar)}return(0,createClass.Z)(GrammarGraph,[{key:"processRaw",value:function processRaw(grammar){var _this=this,processed=grammar.replace(/^export default "|\/\*.*?\*\/|(\\[rnt])+|";$/g," ");this.vocabulary.getLiteralNames().forEach((function(literal,index){var symbolic=_this.vocabulary.symbolicName(index);literal&&processed.includes(literal)&&(processed=processed.replace(new RegExp(literal.replace(rgxEscape,"\\$&"),"g")," "+symbolic+" "))})),processed.split(";").filter((function(value){return value.includes(":")})).forEach((function(value,index){var colon=value.indexOf(":"),name=_this.tokenizer.ruleName(value.substr(0,colon).trim(),index),tokens=_this.tokenizer.tokenize(value.substr(++colon).trim().replace(/ +/g," "));_this.addRule(name,tokens)})),this.rules.forEach((function(rule){return rule.resolveStatements(_this.rules,_this.operators,new Map)})),this.rules.forEach((function(rule){return rule.resolveSyntax(_this.keywords)})),this.keywords.distinct();var rule0=this.vocabulary.ruleName(0);rule0&&(this.root=this.rules.get(rule0))}},{key:"addRule",value:function addRule(name,tokens){var rule=new GrammarStatement(StatementType.Rule,tokens,name);return this.rules.set(name,rule),rule.processRule(),rule}},{key:"rootName",value:function rootName(){return this.root?this.root.name:void 0}},{key:"suggestions",value:function suggestions(){return this.keywords.entries.map((function(entry){return{label:entry.keyword,kind:entry.completionKind(),insertText:entry.snippet,detail:entry.syntax,documentation:""}}))}}]),GrammarGraph}(),keywordRgx=/[a-zA-Z][\w]*/,VocabularyPack=function(){function VocabularyPack(lexer,parser){var _this=this;(0,classCallCheck.Z)(this,VocabularyPack),this.ruleNames=void 0,this.symbolicNames=void 0,this.literalNames=void 0,this.operatorNames=void 0,this.keywordNames=void 0,this.ruleNames=Array.from(parser.ruleNames);var count=lexer.vocabulary.maxTokenType;this.symbolicNames=new Array(count),this.literalNames=new Array(count),this.operatorNames=new Array(count),this.keywordNames=new Array(count);var vocabulary=lexer.vocabulary;lexer.ruleNames.forEach((function(ruleName){if(ruleName in lexer){var _this$literalNames$in,_this$operatorNames$i,index=lexer[ruleName];if("number"==typeof index&&Number.isInteger(index)&&index>0&&index<=count)_this.symbolicNames[index]=ruleName,_this.literalNames[index]=vocabulary.getLiteralName(index),_this.operatorNames[index]=null===(_this$literalNames$in=_this.literalNames[index])||void 0===_this$literalNames$in?void 0:_this$literalNames$in.replace(/^'+|'+$/g,""),_this.keywordNames[index]=keywordRgx.test(null!==(_this$operatorNames$i=_this.operatorNames[index])&&void 0!==_this$operatorNames$i?_this$operatorNames$i:"")?_this.operatorNames[index]:void 0}}))}return(0,createClass.Z)(VocabularyPack,[{key:"ruleName",value:function ruleName(index){return this.ruleNames[index]}},{key:"symbolicName",value:function symbolicName(index){return this.symbolicNames[index]}},{key:"operator",value:function operator(index){return this.operatorNames[index]}},{key:"keyword",value:function keyword(index){return this.keywordNames[index]}},{key:"getLiteralNames",value:function getLiteralNames(){return this.literalNames}},{key:"getSymbolicNames",value:function getSymbolicNames(){return this.symbolicNames}},{key:"isSymbolicName",value:function isSymbolicName(name){return this.symbolicNames.includes(name)}},{key:"isRuleName",value:function isRuleName(name){return this.ruleNames.includes(name)}},{key:"symbolicIndex",value:function symbolicIndex(name){return this.symbolicNames.indexOf(name)}},{key:"hasKeyword",value:function hasKeyword(index){return!!this.keywordNames[index]}},{key:"hasOperator",value:function hasOperator(index){return!!this.operatorNames[index]}},{key:"getRuleNames",value:function getRuleNames(){return this.ruleNames}}]),VocabularyPack}(),TokensProvider=function(){function TokensProvider(tools){(0,classCallCheck.Z)(this,TokensProvider),this.definition=void 0;var Lexer=tools.Lexer,_tools$monarchDefinit=tools.monarchDefinition,monarchDefinition=void 0===_tools$monarchDefinit?{}:_tools$monarchDefinit;this.definition=JSON.parse(JSON.stringify(monarchDefinition),rgxReviver),this.createCategories(),this.addTokens(Lexer)}return(0,createClass.Z)(TokensProvider,[{key:"createCategories",value:function createCategories(){this.createCategory("keywords"),this.createCategory("operators"),this.createCategory("specials"),this.createCategory("variables"),this.createCategory("attributes"),this.createCategory("dimensions"),this.createCategory("primaryMeasures")}},{key:"createCategory",value:function createCategory(category){category in this.definition&&this.definition.keywords instanceof Array||(this.definition[category]=new Array)}},{key:"addTokens",value:function addTokens(lexer){var _this=this,vocabulary=lexer.vocabulary;lexer.ruleNames.forEach((function(_,index){var tokenName=vocabulary.getLiteralName(++index);tokenName&&(tokenName=tokenName.replace(/^'+|'+$/g,""),keywordRgx.test(tokenName)?_this.definition.keywords.push(tokenName):vocabulary.getSymbolicName(index)?_this.definition.specials.push(tokenName):_this.definition.operators.push(tokenName))}))}},{key:"monarchLanguage",value:function monarchLanguage(){return this.definition}},{key:"addVariables",value:function addVariables(){this.definition.variables.push("ds_L_CY","ErrB","ds_V_PY")}}]),TokensProvider}(),rgxPrefix="_RGX_",rgxRgx=/\/(.*)\/(.*)?/;function rgxReviver(_,value){var strValue=value.toString();if(0===strValue.indexOf(rgxPrefix)){var matchArray=strValue.split(rgxPrefix)[1].match(rgxRgx);return new RegExp(matchArray[1],matchArray[2]||"")}return value}editor_main.languages.CompletionItemKind.Function,editor_main.languages.CompletionItemKind.Enum,editor_main.languages.CompletionItemKind.Property;var VARIABLE=editor_main.languages.CompletionItemKind.Variable,providerManager=(editor_main.languages.CompletionItemKind.Keyword,editor_main.languages.CompletionItemKind.Snippet,editor_main.languages.CompletionItemInsertTextRule.InsertAsSnippet,new(function(){function ProviderManager(){var _this=this;(0,classCallCheck.Z)(this,ProviderManager),this.completionItemDispose=void 0,this.registeredLanguages=new Set,this.registeredThemes=new Set,this.getEditorWillMount=function(tools){var id=tools.id;return function(_ref){var variables=_ref.variables,editor=_ref.editor;return function(monaco){try{if(_this.registeredLanguages.has(id)||(monaco.languages.register({id}),_this.registeredLanguages.add(id)),tools.monarchDefinition){var tokensProvider=new TokensProvider(tools);monaco.languages.setMonarchTokensProvider(id,tokensProvider.monarchLanguage())}if([id,"vtl-default","vtl-light","vtl-dark","vtl-black"].forEach((function(themeName){_this.registeredThemes.has(themeName)||(themeName===id?monaco.editor.defineTheme(themeName,{base:"vs",inherit:!0,rules:[{token:"string",foreground:"018B03"},{token:"comment",foreground:"939393"},{token:"operator",foreground:"8B3301"},{token:"delimiter.bracket",foreground:"8B3301"},{token:"operator.special",foreground:"8B3301",fontStyle:"bold"}],colors:{}}):monaco.editor.defineTheme(themeName,getVtlTheme(themeName)),_this.registeredThemes.add(themeName))})),monaco.languages.setLanguageConfiguration(id,{surroundingPairs:[{open:"{",close:"}"},{open:"(",close:")"},{open:"[",close:"]"}],autoClosingPairs:[{open:"{",close:"}"},{open:"(",close:")"},{open:"[",close:"]"}],brackets:[["{","}"],["(",")"],["[","]"]]}),_this.completionItemDispose)try{_this.completionItemDispose.dispose()}catch(error){console.warn("Error disposing previous completion provider:",error)}_this.completionItemDispose=monaco.languages.registerCompletionItemProvider(id,{provideCompletionItems:getSuggestions(tools,{variables})});try{var widget=editor.getContribution("editor.contrib.suggestController").widget;if(widget)widget.value._setDetailsVisible(!0)}catch(error){console.warn("Error configuring suggest widget:",error)}}catch(error){console.error("Error in getEditorWillMount:",error)}}}}}return(0,createClass.Z)(ProviderManager,[{key:"dispose",value:function dispose(){if(this.completionItemDispose){try{this.completionItemDispose.dispose()}catch(error){console.warn("Error disposing completion item provider:",error)}this.completionItemDispose=void 0}}}]),ProviderManager}())),getEditorWillMount=providerManager.getEditorWillMount,buildGrammarGraph=function buildGrammarGraph(tools){var Lexer=tools.Lexer,Parser=tools.Parser,grammar=tools.grammar,lexer=createLexer(Lexer)(""),parser=function createParser(_ref){var Lexer=_ref.Lexer,Parser=_ref.Parser;return function(input){var lexer=createLexer(Lexer)(input);return createParserFromLexer(Parser)(lexer)}}({Lexer,Parser})(""),vocabulary=new VocabularyPack(lexer,parser);return new GrammarGraph(vocabulary,grammar)},getVtlTheme=function getVtlTheme(name){switch(name){case"vtl-default":return{base:"vs",inherit:!0,rules:[{token:"string",foreground:"018B03"},{token:"comment",foreground:"939393"},{token:"operator",foreground:"8B3301"},{token:"attribute",foreground:"9ffb88"},{token:"dimension",foreground:"f7b74e"},{token:"primaryMeasure",foreground:"953d55"},{token:"delimiter.bracket",foreground:"8B3301"},{token:"operator.special",foreground:"8B3301",fontStyle:"bold"}],colors:{}};case"vtl-light":return{base:"vs",inherit:!0,rules:[{token:"attribute",foreground:"9ffb88"},{token:"dimension",foreground:"f7b74e"},{token:"primaryMeasure",foreground:"953d55"}],colors:{}};case"vtl-dark":return{base:"vs-dark",inherit:!0,rules:[{token:"attribute",foreground:"9ffb88"},{token:"dimension",foreground:"f7b74e"},{token:"primaryMeasure",foreground:"953d55"}],colors:{}};case"vtl-black":return{base:"hc-black",inherit:!0,rules:[{token:"attribute",foreground:"9ffb88"},{token:"dimension",foreground:"f7b74e"},{token:"primaryMeasure",foreground:"953d55"}],colors:{}}}return{base:"vs",colors:{},inherit:!0,rules:[]}},getSuggestions=function getSuggestions(tools,_ref2){var variables=_ref2.variables;return function(model,position){var textUntilPosition=model.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:position.lineNumber,endColumn:position.column}),word=model.getWordUntilPosition(position),range={startLineNumber:position.lineNumber,endLineNumber:position.lineNumber,startColumn:word.startColumn,endColumn:word.endColumn},uniquetext=Array.from(new Set(textUntilPosition.replace(/"(.*?)"/g,"").replace(/[^a-zA-Z_]/g," ").split(" ").filter((function(w){return""!==w}))).values());buildGrammarGraph(tools);var _tools$getSuggestions=tools.getSuggestionsFromRange,grammarSuggestions=(void 0===_tools$getSuggestions?function(){return[]}:_tools$getSuggestions)(range),suggestionList=0!==grammarSuggestions.length?grammarSuggestions:buildGrammarGraph(tools).suggestions();uniquetext=function removeLanguageSyntaxFromList(vars,suggestionList){var suggestionsLabels=suggestionList.map((function(s){return s.label.toLowerCase()}));return vars.filter((function(t){return!suggestionsLabels.includes(t.toLowerCase())}))}(uniquetext,suggestionList);var array=uniquetext.map((function(w){return{label:w,kind:editor_main.languages.CompletionItemKind.Variable,insertText:w}})),vars=(variables||[]).map((function(_ref3){var label=_ref3.label,name=_ref3.name;return{label,kind:VARIABLE,insertText:name,range}}));return{suggestions:[].concat((0,toConsumableArray.Z)(array),(0,toConsumableArray.Z)(vars),(0,toConsumableArray.Z)(suggestionList))}}},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),EditorFooter=function EditorFooter(_ref){var cursor=_ref.cursor,FooterComponent=_ref.FooterComponent;return FooterComponent?(0,jsx_runtime.jsx)(FooterComponent,{cursor}):(0,jsx_runtime.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",fontSize:"12px",fontFamily:"monospace",width:"100%"},children:(0,jsx_runtime.jsxs)("span",{children:["Line ",cursor.line," - Column ",cursor.column,cursor.selectionLength>0&&(0,jsx_runtime.jsxs)("span",{children:[" (",cursor.selectionLength," selected)"]})]})})};const src_EditorFooter=EditorFooter;try{EditorFooter.displayName="EditorFooter",EditorFooter.__docgenInfo={description:"",displayName:"EditorFooter",props:{cursor:{defaultValue:null,description:"",name:"cursor",required:!0,type:{name:"CursorType"}},FooterComponent:{defaultValue:null,description:"",name:"FooterComponent",required:!1,type:{name:"FC<{ cursor: CursorType; }>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/EditorFooter.tsx#EditorFooter"]={docgenInfo:EditorFooter.__docgenInfo,name:"EditorFooter",path:"src/EditorFooter.tsx#EditorFooter"})}catch(__react_docgen_typescript_loader_error){}dist._m.config({monaco:editor_main});var Editor=function Editor(_ref){var script=_ref.script,setScript=_ref.setScript,onListErrors=_ref.onListErrors,customFetcher=_ref.customFetcher,variables=_ref.variables,variablesInputURLs=_ref.variablesInputURLs,tools=_ref.tools,_ref$height=_ref.height,height=void 0===_ref$height?"50vh":_ref$height,_ref$width=_ref.width,width=void 0===_ref$width?"100%":_ref$width,_ref$theme=_ref.theme,theme=void 0===_ref$theme?"vs-dark":_ref$theme,options=_ref.options,shortcuts=_ref.shortcuts,FooterComponent=_ref.FooterComponent,_ref$displayFooter=_ref.displayFooter,displayFooter=void 0===_ref$displayFooter||_ref$displayFooter,editorRef=(0,react.useRef)(null),monacoRef=(0,react.useRef)(null),_useState=(0,react.useState)(!1),_useState2=(0,slicedToArray.Z)(_useState,2),ready=_useState2[0],setReady=_useState2[1],_useState3=(0,react.useState)(function buildVariables(variables){return variables?Object.entries(variables).map((function(_ref){var _ref2=(0,slicedToArray.Z)(_ref,2),name=_ref2[0],_ref2$=_ref2[1],type=_ref2$.type;return{name,type,role:_ref2$.role,label:"".concat(name.toUpperCase()," (").concat(type,")")}})):[]}(variables)),_useState4=(0,slicedToArray.Z)(_useState3,2),vars=_useState4[0],setVars=_useState4[1],_useState5=(0,react.useState)(!1),_useState6=(0,slicedToArray.Z)(_useState5,2),isEditorReady=_useState6[0],setIsEditorReady=_useState6[1],_useState7=(0,react.useState)(0),_useState8=(0,slicedToArray.Z)(_useState7,2),editorKey=_useState8[0],setEditorKey=_useState8[1],_useState9=(0,react.useState)({line:1,column:1,selectionLength:0}),_useState10=(0,slicedToArray.Z)(_useState9,2),cursor=_useState10[0],setCursor=_useState10[1],cleanupMonaco=(0,react.useCallback)((function(){if(editorRef.current){try{editorRef.current.dispose()}catch(error){console.warn("Error disposing Monaco editor:",error)}editorRef.current=null}monacoRef.current=null,setIsEditorReady(!1),function cleanupProviders(){providerManager.dispose()}()}),[]);(0,react.useEffect)((function(){var handleMonacoError=function handleMonacoError(event){var _event$error,_event$error$message;return null===(_event$error=event.error)||void 0===_event$error||null===(_event$error$message=_event$error.message)||void 0===_event$error$message||!_event$error$message.includes("InstantiationService has been disposed")||(console.warn("Monaco InstantiationService disposal detected, cleaning up..."),cleanupMonaco(),setEditorKey((function(prev){return prev+1})),event.preventDefault(),!1)},handleUnhandledRejection=function handleUnhandledRejection(event){var _event$reason,_event$reason$message;return null===(_event$reason=event.reason)||void 0===_event$reason||null===(_event$reason$message=_event$reason.message)||void 0===_event$reason$message||!_event$reason$message.includes("InstantiationService has been disposed")||(console.warn("Monaco InstantiationService disposal detected in promise, cleaning up..."),cleanupMonaco(),setEditorKey((function(prev){return prev+1})),event.preventDefault(),!1)};return window.addEventListener("error",handleMonacoError),window.addEventListener("unhandledrejection",handleUnhandledRejection),function(){window.removeEventListener("error",handleMonacoError),window.removeEventListener("unhandledrejection",handleUnhandledRejection)}}),[cleanupMonaco]),(0,react.useEffect)((function(){return function(){cleanupMonaco()}}),[cleanupMonaco]);var parseContent=(0,react.useCallback)((function(t,str){var _monacoRef$current,editor=editorRef.current;if(editor&&monacoRef.current){var monacoErrors=function validate(_ref2){var Lexer=_ref2.Lexer,Parser=_ref2.Parser,initialRule=_ref2.initialRule;return function(input){var errors=[],lexer=createLexer(Lexer)(input);lexer.removeErrorListeners(),lexer.addErrorListener(new ConsoleErrorListener);var parser=createParserFromLexer(Parser)(lexer);return parser.removeErrorListeners(),parser.addErrorListener(new CollectorErrorListener(errors)),parser[initialRule](),errors}}(t)((null==editor?void 0:editor.getValue())||str).map((function(error){return{startLineNumber:error.startLine,startColumn:error.startCol,endLineNumber:error.endLine,endColumn:error.endCol,message:error.message,severity:editor_api.MarkerSeverity.Error}})),model=null==editor?void 0:editor.getModel();model&&(null===(_monacoRef$current=monacoRef.current)||void 0===_monacoRef$current||_monacoRef$current.editor.setModelMarkers(model,"owner",monacoErrors)),onListErrors&&onListErrors(monacoErrors.map((function(error){return{line:error.startLineNumber,column:error.startColumn,message:error.message}})))}}),[onListErrors]);(0,react.useEffect)((function(){Array.isArray(variablesInputURLs)&&0!==variablesInputURLs.length||setReady(!0);var f=customFetcher||fetch;variablesInputURLs&&variablesInputURLs.length>0&&!ready&&Promise.all(variablesInputURLs.map((function(v){return f(v)}))).then((function(res){return Promise.all(res.map((function(r){return r.json()}))).then((function(res){var uniqueVars=function buildUniqueVariables(variables){return variables.reduce((function(acc,a){return[].concat((0,toConsumableArray.Z)(acc),(0,toConsumableArray.Z)(a))}),[]).map((function(v){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},v),{},{label:"".concat(v.name.toUpperCase()).concat(v.type?" (".concat(v.type,")"):"")})}))}(res);setVars((function(v){return[].concat((0,toConsumableArray.Z)(v),(0,toConsumableArray.Z)(uniqueVars))})),setReady(!0)}))})).catch((function(){setReady(!0)}))}),[variablesInputURLs]),(0,react.useEffect)((function(){isEditorReady&&parseContent(tools)}),[tools.initialRule,isEditorReady,parseContent,tools]);var isDark=theme.includes("dark");if(!ready)return null;var bannerHeight=displayFooter?22:0;return(0,jsx_runtime.jsxs)("div",{style:{position:"relative",height,width},children:[(0,jsx_runtime.jsx)("div",{style:{height:"calc(100% - ".concat(bannerHeight,"px)")},children:(0,jsx_runtime.jsx)(dist.ZP,{value:script,height:"100%",width:"100%",onMount:function onMount(e,m){parseContent(tools,script),function onMount(editor,mon,t){var parseContentTO,contentChangeTO;editorRef.current=editor,monacoRef.current=mon,setIsEditorReady(!0),parseContent(t,script),editor.onDidChangeModelContent((function(){parseContentTO&&clearTimeout(parseContentTO),parseContentTO=setTimeout((function(){parseContent(t,script)}),0),contentChangeTO||setScript&&(contentChangeTO=setTimeout((function(){setScript(editor.getValue()),contentChangeTO=void 0}),200))})),editor.onDidChangeCursorPosition((function(e){setCursor((function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{line:e.position.lineNumber,column:e.position.column})}))})),editor.onDidChangeCursorSelection((function(e){var _editor$getModel,selection=e.selection,length=null==editor||null===(_editor$getModel=editor.getModel())||void 0===_editor$getModel?void 0:_editor$getModel.getValueInRange(selection).length;setCursor((function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{selectionLength:length||0})}))})),shortcuts&&Object.entries(shortcuts).forEach((function(_ref2){var _ref3=(0,slicedToArray.Z)(_ref2,2),comboString=_ref3[0],action=_ref3[1];comboString.split(",").forEach((function(combo){var keys=combo.trim().toLowerCase().split("+"),keyCode=null,keyMod=0;keys.forEach((function(k){if("ctrl"===k)keyMod|=editor_main.KeyMod.CtrlCmd;else if("meta"===k)keyMod|=editor_main.KeyMod.CtrlCmd;else if("shift"===k)keyMod|=editor_main.KeyMod.Shift;else if("alt"===k)keyMod|=editor_main.KeyMod.Alt;else{var upper=1===k.length?k.toUpperCase():k;keyCode="Key".concat(upper)in editor_main.KeyCode?editor_main.KeyCode["Key".concat(upper)]:upper in editor_main.KeyCode?editor_main.KeyCode[upper]:null}})),null!==keyCode&&editor.addCommand(keyMod|keyCode,(function(e){var _e$preventDefault;null==e||null===(_e$preventDefault=e.preventDefault)||void 0===_e$preventDefault||_e$preventDefault.call(e),action()}))}))})),editor.onKeyDown((function(e){var _shortcuts$ctrlEnter,isMac=/Mac/.test(navigator.userAgent),metaPressed=e.metaKey,ctrlPressed=e.ctrlKey;(isMac&&metaPressed&&"Enter"===e.code||!isMac&&ctrlPressed&&"Enter"===e.code)&&(e.preventDefault(),e.stopPropagation(),null===(_shortcuts$ctrlEnter=shortcuts["ctrl+enter, meta+enter"])||void 0===_shortcuts$ctrlEnter||_shortcuts$ctrlEnter.call(shortcuts))}))}(e,m,tools),getEditorWillMount(tools)({variables:vars,editor:e})(m)},onChange:function onChange(){isEditorReady&&parseContent(tools)},theme,language:tools.id,options},editorKey)}),displayFooter&&(0,jsx_runtime.jsx)("div",{style:{position:"absolute",height:bannerHeight,width:"100%",bottom:0,left:0,gap:"12px",padding:"4px 8px",background:isDark?"#1e1e1e":"#f3f3f3",color:isDark?"#ccc":"#333",borderTop:"1px solid ".concat(isDark?"#333":"#ccc"),zIndex:10,boxSizing:"border-box"},children:(0,jsx_runtime.jsx)(src_EditorFooter,{cursor,FooterComponent})})]})};const src_Editor=Editor;try{Editor.displayName="Editor",Editor.__docgenInfo={description:"",displayName:"Editor",props:{script:{defaultValue:null,description:"",name:"script",required:!1,type:{name:"string"}},setScript:{defaultValue:null,description:"",name:"setScript",required:!1,type:{name:"((value: string) => void)"}},customFetcher:{defaultValue:null,description:"",name:"customFetcher",required:!1,type:{name:"((url: string) => Promise<any>)"}},variables:{defaultValue:null,description:"",name:"variables",required:!1,type:{name:"Variables"}},variablesInputURLs:{defaultValue:null,description:"",name:"variablesInputURLs",required:!1,type:{name:"string[]"}},tools:{defaultValue:null,description:"",name:"tools",required:!0,type:{name:"Tools"}},onListErrors:{defaultValue:null,description:"",name:"onListErrors",required:!1,type:{name:"((errors: Error[]) => void)"}},height:{defaultValue:{value:"50vh"},description:"",name:"height",required:!1,type:{name:"string"}},width:{defaultValue:{value:"100%"},description:"",name:"width",required:!1,type:{name:"string"}},theme:{defaultValue:{value:"vs-dark"},description:"",name:"theme",required:!1,type:{name:"string"}},options:{defaultValue:null,description:"",name:"options",required:!1,type:{name:"IStandaloneEditorConstructionOptions"}},shortcuts:{defaultValue:null,description:"",name:"shortcuts",required:!0,type:{name:"Record<string, () => void>"}},FooterComponent:{defaultValue:null,description:"",name:"FooterComponent",required:!1,type:{name:"FC<{ cursor: CursorType; }>"}},displayFooter:{defaultValue:{value:"true"},description:"",name:"displayFooter",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Editor.tsx#Editor"]={docgenInfo:Editor.__docgenInfo,name:"Editor",path:"src/Editor.tsx#Editor"})}catch(__react_docgen_typescript_loader_error){}},"./src/stories sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(ts%7Ctsx))$":(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./EnhancedEditor.stories.tsx":"./src/stories/EnhancedEditor.stories.tsx","./ImprovedEditor.stories.tsx":"./src/stories/ImprovedEditor.stories.tsx","./VtlEditor20.stories.tsx":"./src/stories/VtlEditor20.stories.tsx","./VtlEditor21.stories.ts":"./src/stories/VtlEditor21.stories.ts"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./src/stories sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(ts%7Ctsx))$"},"./src/stories sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.mdx)$":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./src/stories sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.mdx)$",module.exports=webpackEmptyContext},"./storybook-init-framework-entry.js":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js")},"?4f7e":()=>{},"./generated-stories-entry.cjs":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module=__webpack_require__.nmd(module),(0,__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js").configure)([__webpack_require__("./src/stories sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.mdx)$"),__webpack_require__("./src/stories sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(ts%7Ctsx))$")],module,!1)}},__webpack_require__=>{var __webpack_exec__=moduleId=>__webpack_require__(__webpack_require__.s=moduleId);__webpack_require__.O(0,[8236],(()=>(__webpack_exec__("./node_modules/@storybook/core-server/node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_exec__("./node_modules/@storybook/core-server/node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_exec__("./storybook-init-framework-entry.js"),__webpack_exec__("./node_modules/@storybook/react/dist/esm/client/docs/config-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/react/dist/esm/client/preview/config-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-links/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-docs/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-actions/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-backgrounds/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-measure/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-outline/preview.js-generated-config-entry.js"),__webpack_exec__("./.storybook/preview.js-generated-config-entry.js"),__webpack_exec__("./generated-stories-entry.cjs"))));__webpack_require__.O()}]);